# 2048 フロントエンド仕様

## 全体概要
- Vue 3 + TypeScript + Vite を用いた単一ページアプリケーションとして実装する。
- ルートコンポーネントで 4×4 のグリッドとスコア表示、リスタート操作を提供する。
- 画面幅 360px 程度でも操作しやすいレイアウトにする。

## ゲームルール
- グリッドは常に 4×4（16 マス）とし、ゲーム開始時にランダムな空きマスへ 2 枚のタイル（値 2 または 4）を生成する。
- 各ターンのタイル追加は、移動後に空きマスが存在する場合のみ行う。
  - 追加されるタイルは値 2 が 90%、値 4 が 10% の確率で出現する。
- プレイヤーは上・下・左・右へのスワイプ／キー入力で全タイルを選択方向へスライドできる。
  - タイルは他タイルまたは壁にぶつかるまで移動する。
  - 同じ値のタイルが衝突した場合は 1 枚に結合し、値は元の 2 枚の合計となる。
  - 1 手番内で結合したタイルは同手番中に再結合できない。
- 全てのマスが埋まり、かつどの方向にも移動・結合できない場合はゲームオーバーとする。

## インタラクション
- PC では矢印キー（上下左右）で操作できる。
- モバイル／タブレットではタッチのスワイプ操作で対応する方向へ移動できる。
- リスタートボタンを押すと現在の盤面を初期化し、新しいゲームを開始する。

## UI 要素
- ヘッダー領域にタイトル「2048」と現在スコア、ベストスコアを表示する。
- スコアは新しいタイル統合時の獲得値（結合後タイルの値）を加算する。
- グリッドは 4×4 のボードとして表示し、空きマスは淡色背景で枠線を表現する。
- タイルは値に応じて背景色を段階的に変え、2048 以上の高得点タイルは淡い発光風スタイルにする。
- フッター付近に操作説明（「矢印キー／スワイプで操作」「リスタートボタン」など）を簡潔に表示する。

## 状態管理
- 盤面は 4×4 の数値配列で管理し、0 を空きマスとして扱う。
- キーイベント／スワイプイベントはロジック層で処理し、盤面・スコアを更新したら Vue のリアクティビティで UI に反映させる。
- ベストスコアはブラウザの localStorage に保存し、ゲーム開始時に読み込み、更新時に保存する。

## エフェクト・アクセシビリティ
- タイル移動と合体時に CSS Transition で滑らかなアニメーションを付与する。
- キーボード操作のフォーカス管理（`tabindex` 設定）を行い、ボード領域へフォーカスしてキー入力を受け取れるようにする。
- 視覚的なみに頼らず、ゲームオーバー時や新しいタイル生成時に `aria-live` 領域で状態を通知する。

## テスト方針
- 主要な移動ロジック（各方向への移動結果、結合処理、タイル出現処理の確率分布除外ロジック）をユニットテストで検証する。
- 盤面が満杯かつ移動不能なケースでゲームオーバー判定が機能することをテストする。
- スコア加算ロジックおよびベストスコア保存ロジックをテストする。
